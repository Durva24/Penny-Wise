"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[338],{42338:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var s=a(95155),l=a(12115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,l.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:c,className:i="",children:o,iconNode:m,...x}=e;return(0,l.createElement)("svg",{ref:t,...d,width:s,height:s,stroke:a,strokeWidth:c?24*Number(r)/Number(s):r,className:n("lucide",i),...x},[...m.map(e=>{let[t,a]=e;return(0,l.createElement)(t,a)}),...Array.isArray(o)?o:[o]])}),i=(e,t)=>{let a=(0,l.forwardRef)((a,s)=>{let{className:d,...i}=a;return(0,l.createElement)(c,{ref:s,iconNode:t,className:n("lucide-".concat(r(e)),d),...i})});return a.displayName="".concat(e),a},o=i("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),m=i("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),x=i("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),h=i("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),u=i("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),g=i("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),b=i("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);var y=a(84307);let f=e=>{let{value:t,maxValue:a}=e,l=Math.min(100,Math.round(t/a*100)||0),r="bg-black";return l>=90?r="bg-gray-900":l>=70&&(r="bg-gray-700"),(0,s.jsxs)("div",{className:"relative pt-1",children:[(0,s.jsxs)("div",{className:"flex mb-2 items-center justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)("span",{className:"text-xs font-semibold inline-block text-gray-800",children:"Healthy spending: <70%"})}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("span",{className:"text-xs font-semibold inline-block text-gray-800",children:[l,"%"]})})]}),(0,s.jsx)("div",{className:"overflow-hidden h-4 mb-2 text-xs flex rounded-full bg-gray-200",children:(0,s.jsx)("div",{style:{width:"".concat(l,"%")},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center ".concat(r)})}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"h-3 w-3 rounded-full bg-black mr-2"}),(0,s.jsx)("span",{className:"text-xs text-gray-800",children:"0-70% (Good)"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"h-3 w-3 rounded-full bg-gray-700 mr-2"}),(0,s.jsx)("span",{className:"text-xs text-gray-800",children:"71-90% (Warning)"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"h-3 w-3 rounded-full bg-gray-900 mr-2"}),(0,s.jsx)("span",{className:"text-xs text-gray-800",children:"91-100% (Critical)"})]})]})]})},j=e=>{let{label:t,value:a}=e;return(0,s.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg bg-white",children:[(0,s.jsx)("p",{className:"text-sm text-gray-800",children:t}),(0,s.jsx)("p",{className:"text-xl font-semibold text-black",children:a})]})},p=()=>(0,s.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[(0,s.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-6"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,s.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,s.jsx)("div",{className:"h-32 bg-gray-200 rounded"})]}),(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-full mt-6"})]});function v(){let{transactions:e,isLoading:t,error:a,refetch:r}=(0,y.x)(),[n,d]=(0,l.useState)(null),[c,i]=(0,l.useState)(!1),[v,N]=(0,l.useState)("overall"),[w,k]=(0,l.useState)(0),[C,M]=(0,l.useState)(0),S=e=>{let t={totalBalance:0,totalCredited:0,totalSpent:0},a={totalBalance:0,totalCredited:0,totalSpent:0},s={totalBalance:0,totalCredited:0,totalSpent:0},l=new Date,r=new Date(l);r.setDate(l.getDate()-l.getDay()+7*w);let n=new Date(r);n.setDate(r.getDate()+6);let d=new Date(l.getFullYear(),l.getMonth()+C,1),c=new Intl.DateTimeFormat("en",{month:"short",day:"numeric"}),i="".concat(c.format(r)," - ").concat(c.format(n)),o=new Intl.DateTimeFormat("en",{month:"long",year:"numeric"}).format(d);return e.forEach(e=>{let l=e.Amount,c=new Date(e.Date);"Credit"===e.Type?(t.totalCredited+=l,t.totalBalance+=l):(t.totalSpent+=l,t.totalBalance-=l),c>=r&&c<=n&&("Credit"===e.Type?(a.totalCredited+=l,a.totalBalance+=l):(a.totalSpent+=l,a.totalBalance-=l)),c.getMonth()===d.getMonth()&&c.getFullYear()===d.getFullYear()&&("Credit"===e.Type?(s.totalCredited+=l,s.totalBalance+=l):(s.totalSpent+=l,s.totalBalance-=l))}),{overall:t,weekly:a,monthly:s,currentWeek:i,currentMonth:o}},B=async()=>{try{i(!0),await r()}catch(e){console.error(e)}finally{i(!1)}};(0,l.useEffect)(()=>{e.length>0&&d(S(e))},[e,w,C]);let D=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),R=()=>{k(0),M(0)},T=(()=>{if(!n)return null;switch(v){case"monthly":return n.monthly;case"weekly":return n.weekly;default:return n.overall}})();return t&&!c?(0,s.jsx)(p,{}):(0,s.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-black",children:"Financial Summary"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-700",children:c?"Refreshing...":"Updated just now"}),(0,s.jsx)("button",{onClick:B,className:"p-2 rounded-full hover:bg-gray-100 focus:outline-none ".concat(c?"animate-spin":""),disabled:c,children:(0,s.jsx)(o,{size:16,className:"text-gray-800"})})]})]}),(0,s.jsxs)("div",{className:"flex border-b border-gray-200 mb-6",children:[(0,s.jsx)("button",{onClick:()=>{N("overall"),R()},className:"py-2 px-4 font-medium text-sm ".concat("overall"===v?"text-black border-b-2 border-black":"text-gray-700 hover:text-black"),children:"Overall"}),(0,s.jsx)("button",{onClick:()=>N("monthly"),className:"py-2 px-4 font-medium text-sm ".concat("monthly"===v?"text-black border-b-2 border-black":"text-gray-700 hover:text-black"),children:"Monthly"}),(0,s.jsx)("button",{onClick:()=>N("weekly"),className:"py-2 px-4 font-medium text-sm ".concat("weekly"===v?"text-black border-b-2 border-black":"text-gray-700 hover:text-black"),children:"Weekly"})]}),"overall"!==v&&n&&(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("button",{onClick:()=>"weekly"===v?k(e=>e-1):M(e=>e-1),className:"p-2 rounded-full hover:bg-gray-100 focus:outline-none",children:(0,s.jsx)(m,{size:16,className:"text-gray-800"})}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(x,{size:16,className:"text-gray-800 mr-2"}),(0,s.jsx)("span",{className:"font-medium text-black",children:"weekly"===v?n.currentWeek:n.currentMonth})]}),(0,s.jsx)("button",{onClick:()=>"weekly"===v?k(e=>e+1):M(e=>e+1),className:"p-2 rounded-full hover:bg-gray-100 focus:outline-none",children:(0,s.jsx)(h,{size:16,className:"text-gray-800"})})]}),a&&(0,s.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,s.jsxs)("p",{className:"text-red-800 font-medium flex items-center",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,s.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,s.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),a]}),(0,s.jsx)("button",{onClick:B,className:"mt-2 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium bg-white hover:bg-gray-50 focus:outline-none",children:"Retry"})]}),(0,s.jsx)(l.Suspense,{fallback:(0,s.jsx)(p,{}),children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow bg-white",children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(u,{size:20,className:"text-gray-800 mr-2"}),(0,s.jsx)("p",{className:"text-base font-medium text-gray-800",children:"Total Balance"})]}),(0,s.jsx)("p",{className:"text-3xl font-bold text-black mb-2",children:T?D(T.totalBalance):"₹0"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(T&&T.totalBalance>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:T&&T.totalBalance>=0?"Positive Balance":"Negative Balance"})})]})})}),(0,s.jsx)("div",{className:"rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow bg-white",children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(g,{size:20,className:"text-green-600 mr-2"}),(0,s.jsx)("p",{className:"text-base font-medium text-gray-800",children:"Total Income"})]}),(0,s.jsx)("p",{className:"text-3xl font-bold text-black mb-2",children:T?D(T.totalCredited):"₹0"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("div",{className:"flex items-center text-sm",children:(0,s.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium",children:"Income"})})})]})})}),(0,s.jsx)("div",{className:"rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow bg-white",children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(b,{size:20,className:"text-red-600 mr-2"}),(0,s.jsx)("p",{className:"text-base font-medium text-gray-800",children:"Total Expenses"})]}),(0,s.jsx)("p",{className:"text-3xl font-bold text-black mb-2",children:T?D(T.totalSpent):"₹0"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("div",{className:"flex items-center text-sm",children:(0,s.jsx)("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium",children:"Expenses"})})})]})})})]})}),T&&T.totalCredited>0&&(0,s.jsxs)("div",{className:"mt-6 p-6 border border-gray-200 rounded-lg bg-white",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("p",{className:"text-base font-medium text-black",children:"Spending vs Income"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"inline-block h-3 w-3 rounded-full bg-black mr-1"}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"".concat(Math.round(T.totalSpent/T.totalCredited*100),"%")})]})]}),(0,s.jsx)(f,{value:T.totalSpent,maxValue:T.totalCredited})]}),T&&(0,s.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[(0,s.jsx)(j,{label:"Savings Rate",value:T.totalCredited>0?"".concat(Math.round((T.totalCredited-T.totalSpent)/T.totalCredited*100),"%"):"0%"}),(0,s.jsx)(j,{label:"Average Transaction",value:D((T.totalCredited+T.totalSpent)/("weekly"===v?7:"monthly"===v?30:Math.max(e.length,1)))})]}),(0,s.jsx)("div",{className:"mt-6 flex justify-end",children:(0,s.jsx)("button",{className:"px-4 py-2 bg-black text-white rounded-md text-sm font-medium hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"View All Transactions"})})]})}}}]);